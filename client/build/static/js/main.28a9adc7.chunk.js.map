{"version":3,"sources":["context/AuthContext.js","context/SocketContext.js","hooks/useAuth.js","services/login.js","services/logout.js","components/Navbar/index.js","components/Login/index.js","components/Icons/Check.js","components/Icons/Cross.js","components/Icons/Bell.js","components/Icons/HeartRate.js","components/Icons/Question.js","components/Home/index.js","components/Page404/index.js","routes/PrivateRoute.js","App.js","index.js"],"names":["AuthContext","createContext","AuthContextProvider","children","useState","user","setUser","window","sessionStorage","getItem","token","setToken","useEffect","decodedToken","jwt","decode","id","name","firstName","lastName","email","ext","role","sessionId","Provider","value","socket","socketIO","connect","SocketContext","SocketContextProvider","useAuth","useContext","isLogged","Boolean","login","password","fetch","method","headers","body","JSON","stringify","then","res","ok","Error","json","loginService","setItem","catch","err","removeItem","toast","error","console","log","logout","Authorization","logoutService","emit","MyNavbar","Navbar","bg","expand","className","Brand","href","src","width","alt","Toggle","aria-controls","Collapse","Button","variant","onClick","Login","setEmail","setPassword","history","useHistory","push","handleSubmit","e","a","preventDefault","Form","onSubmit","Group","controlId","Label","Control","type","placeholder","onChange","target","block","SvgComponent","color","height","viewBox","xmlns","d","fill","stroke","strokeLinecap","strokeLinejoin","fillRule","transform","cx","cy","r","STATES","Home","activateBreak","setActivateBreak","pauseType","setPauseType","useForm","register","errors","setValue","reset","toastId","formState","isDirty","useRef","extStatus","setExtStatus","setColor","on","data","msg","phone","undefined","current","dark","rut","dismiss","Cross","Bell","HeartRate","Check","Question","Icon","disabled","response","formData","success","htmlFor","ref","required","validate","isRut","maxLength","minLength","Page404","to","PrivateRoute","RouteComponent","component","rest","render","routeProps","App","position","autoClose","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","exact","path","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.28a9adc7.chunk.js","sourcesContent":["import { useState, useEffect, createContext } from 'react';\nimport jwt from 'jsonwebtoken';\n\nconst AuthContext = createContext({});\n\nexport const AuthContextProvider = ({ children }) => {\n  const [user, setUser] = useState({});\n  const [token, setToken] = useState(() =>\n    window.sessionStorage.getItem('token')\n  );\n\n  useEffect(() => {\n    if (token) {\n      const decodedToken = jwt.decode(token);\n      setUser({\n        id: decodedToken.id,\n        name: `${decodedToken.name.firstName} ${decodedToken.name.lastName}`,\n        email: decodedToken.email,\n        ext: decodedToken.ext,\n        role: decodedToken.role,\n        sessionId: decodedToken.sessionId,\n      });\n    }\n  }, [token]);\n\n  return (\n    <AuthContext.Provider\n      value={{\n        token,\n        setToken,\n        user,\n        setUser,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport default AuthContext;\n","import { createContext } from 'react';\nimport socketIO from 'socket.io-client';\n\nconst socket = socketIO.connect();\nconst SocketContext = createContext();\n\nexport const SocketContextProvider = ({ children }) => {\n  return (\n    <SocketContext.Provider\n      value={{\n        socket,\n      }}\n    >\n      {children}\n    </SocketContext.Provider>\n  );\n};\n\nexport default SocketContext;\n","import { useContext } from 'react';\n\nimport { toast } from 'react-toastify';\n\nimport AuthContext from '../context/AuthContext';\nimport loginService from '../services/login';\nimport logoutService from '../services/logout';\n\nimport SocketContext from '../context/SocketContext';\n\nconst useAuth = () => {\n  const { token, setToken, user, setUser } = useContext(AuthContext);\n  const { socket } = useContext(SocketContext);\n\n  const login = ({ email, password }) => {\n    loginService({ email, password })\n      .then((token) => {\n        window.sessionStorage.setItem('token', token);\n        setToken(token);\n      })\n      .catch((err) => {\n        window.sessionStorage.removeItem('token');\n        setUser({});\n        toast.error('Nombre de usuario y/o contraseña invalidos.');\n        console.log(err);\n      });\n  };\n\n  const logout = () => {\n    logoutService(token)\n      .then(() => {\n        socket.emit('leave', `SIP/${user.ext}`);\n        window.sessionStorage.removeItem('token');\n        setUser({});\n        setToken(null);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  return {\n    isLogged: Boolean(token),\n    login,\n    logout,\n    user,\n  };\n};\n\nexport default useAuth;\n","const ENDPOINT = 'http://localhost:3001/api';\n\nexport default function login({ email, password }) {\n  return fetch(`/api/auth`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ email, password }),\n  })\n    .then((res) => {\n      if (!res.ok) throw new Error('Response is NOT ok');\n      return res.json();\n    })\n    .then((res) => {\n      const { token } = res;\n      return token;\n    });\n}\n","const ENDPOINT = 'http://localhost:3001/api';\n\nexport default function logout(token) {\n  return fetch(`/api/logout`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${token}`,\n    },\n  }).then((res) => {\n    if (!res.ok) throw new Error('Response is NOT ok');\n    return res.json();\n  });\n}\n","import Navbar from 'react-bootstrap/Navbar';\nimport Button from 'react-bootstrap/Button';\nimport useAuth from '../../hooks/useAuth';\n\nconst MyNavbar = () => {\n  const { isLogged, logout } = useAuth();\n\n  return (\n    <>\n      <Navbar bg=\"light\" expand=\"lg\">\n        <div className=\"container\">\n          <Navbar.Brand href=\"/\">\n            <img src=\"line-logo.png\" width=\"48px\" alt=\"2call logo\" />\n          </Navbar.Brand>\n          <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n          <Navbar.Collapse id=\"basic-navbar-nav\">\n            {isLogged && (\n              <Button\n                className=\"ml-auto \"\n                variant=\"outline-success\"\n                onClick={logout}\n              >\n                Salir\n              </Button>\n            )}\n          </Navbar.Collapse>\n        </div>\n      </Navbar>\n    </>\n  );\n};\n\nexport default MyNavbar;\n","import { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport useAuth from '../../hooks/useAuth';\n\nconst Login = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const { login, isLogged } = useAuth();\n  const history = useHistory();\n\n  useEffect(() => {\n    if (isLogged) history.push('/');\n  }, [isLogged, history]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    login({ email, password });\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"mt-5 d-flex justify-content-center align-items-center\">\n        <Form onSubmit={handleSubmit}>\n          <Form.Group controlId=\"formBasicEmail\">\n            <Form.Label>Correo Electronico</Form.Label>\n            <Form.Control\n              type=\"email\"\n              placeholder=\"Ingresa tu correo...\"\n              onChange={(e) => setEmail(e.target.value)}\n              value={email}\n            />\n          </Form.Group>\n          <Form.Group controlId=\"formBasicPassword\">\n            <Form.Label>Contraseña</Form.Label>\n            <Form.Control\n              type=\"password\"\n              placeholder=\"Ingresa tu contraseña...\"\n              onChange={(e) => setPassword(e.target.value)}\n              value={password}\n            />\n          </Form.Group>\n          <Button variant=\"primary\" type=\"submit\" block>\n            Login\n          </Button>\n        </Form>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n","function SvgComponent({ color }) {\n  return (\n    <svg\n      height={21}\n      viewBox=\"0 0 21 21\"\n      width={21}\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M5.5 11.5l3 3 8.028-8\"\n        fill=\"none\"\n        stroke={color}\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n\nexport default SvgComponent;\n","function SvgComponent({ color }) {\n  return (\n    <svg\n      height={21}\n      viewBox=\"0 0 21 21\"\n      width={21}\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <g\n        fill=\"none\"\n        fillRule=\"evenodd\"\n        stroke={color}\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      >\n        <path d=\"M5.5 15.5l10-10M15.5 15.5l-10-10z\" />\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgComponent;\n","function SvgComponent({ color }) {\n  return (\n    <svg\n      height={21}\n      viewBox=\"0 0 21 21\"\n      width={21}\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <g\n        fill=\"none\"\n        fillRule=\"evenodd\"\n        stroke={color}\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      >\n        <path d=\"M15.585 15.5H5.415A1.65 1.65 0 014 13a10.526 10.526 0 001.5-5.415V6.5a4 4 0 014-4h2a4 4 0 014 4v1.085c0 1.907.518 3.78 1.5 5.415a1.65 1.65 0 01-1.415 2.5zM17.5 4.5c-.267-.934-.6-1.6-1-2-.4-.4-1.067-.733-2-1M3.588 4.5c.208-.933.512-1.6.912-2 .4-.4 1.095-.732 2.088-1M13 17c-.667 1-1.5 1.5-2.5 1.5S8.667 18 8 17\" />\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgComponent;\n","function SvgComponent({ color }) {\n  return (\n    <svg\n      height={21}\n      viewBox=\"0 0 21 21\"\n      width={21}\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M3 10.5h2l2.5-6 2 12 3-9 2.095 6 1.405-3h2\"\n        fill=\"none\"\n        stroke={color}\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n\nexport default SvgComponent;\n","function SvgComponent({ color }) {\n  return (\n    <svg\n      height={21}\n      viewBox=\"0 0 21 21\"\n      width={21}\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <g fill=\"none\" fillRule=\"evenodd\" transform=\"translate(2 2)\">\n        <circle\n          cx={8.5}\n          cy={8.5}\n          r={8}\n          stroke={color}\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        />\n        <path\n          d=\"M8.5 9.5v-1l1.414-1.414a2 2 0 00.586-1.414V5.5c0-.613-.346-1.173-.894-1.447l-.212-.106a2 2 0 00-1.788 0L7.5 4c-.613.306-1 .933-1 1.618V6.5\"\n          stroke={color}\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        />\n        <circle cx={8.5} cy={12.5} fill={color} r={1} />\n      </g>\n    </svg>\n  );\n}\n\nexport default SvgComponent;\n","import { useEffect, useContext, useState, useRef } from 'react';\nimport { validate } from 'rut.js';\nimport Button from 'react-bootstrap/Button';\nimport { useForm } from 'react-hook-form';\nimport { toast } from 'react-toastify';\nimport SocketContext from '../../context/SocketContext';\nimport AuthContext from '../../context/AuthContext';\nimport useAuth from '../../hooks/useAuth';\nimport Check from '../Icons/Check';\nimport Cross from '../Icons/Cross';\nimport Bell from '../Icons/Bell';\nimport HeartRate from '../Icons/HeartRate';\nimport Question from '../Icons/Question';\n\n//Idle\n//InUse\n//Busy\n//Unavailable\n//Ringing\n//InUse&Ringing\n//Hold\n//InUse&Hold\n//Unknown\nconst STATES = {\n  INUSE: 'InUse',\n  IDLE: 'Idle',\n  RINGING: 'Ringing',\n  UNAVAILABLE: 'Unavailable',\n};\n\nconst Home = () => {\n  const [activateBreak, setActivateBreak] = useState(false);\n  const [pauseType, setPauseType] = useState('default');\n\n  const {\n    register,\n    errors,\n    handleSubmit,\n    setValue,\n    reset,\n    formState,\n  } = useForm();\n\n  const { isDirty } = formState;\n  const toastId = useRef(null);\n  const { socket } = useContext(SocketContext);\n  const { token } = useContext(AuthContext);\n  const { user } = useAuth();\n  const [extStatus, setExtStatus] = useState(null);\n  const [color, setColor] = useState('secondary');\n\n  useEffect(() => {\n    user?.ext && socket.emit('join', `SIP/${user.ext}`);\n    user?.ext && socket.emit('checkExtState', user.ext);\n  }, [user, socket]);\n\n  useEffect(() => {\n    console.log(activateBreak);\n    if (activateBreak === false) {\n      console.log('entro');\n      setPauseType('default');\n    }\n  }, [activateBreak]);\n\n  useEffect(() => {\n    socket.on('checkedExtState', (data) => {\n      setExtStatus(data);\n      if (data === STATES.UNAVAILABLE) {\n        setColor('danger');\n      } else if (data === STATES.RINGING) {\n        setColor('warning');\n      } else if (data === STATES.INUSE) {\n        setColor('primary');\n      } else if (data === STATES.IDLE) {\n        setColor('success');\n      } else {\n        setColor('secondary');\n      }\n    });\n  }, [socket]);\n\n  useEffect(() => {\n    socket.on('ExtStateChange', (data) => {\n      setExtStatus(data);\n      if (data === STATES.UNAVAILABLE) {\n        setColor('danger');\n      } else if (data === STATES.RINGING) {\n        setColor('warning');\n      } else if (data === STATES.INUSE) {\n        setColor('primary');\n      } else if (data === STATES.IDLE) {\n        setColor('success');\n      } else {\n        setColor('secondary');\n      }\n    });\n  }, [socket]);\n\n  useEffect(() => {\n    socket.on('DialBegin', (data) => {\n      const msg = `${data.phone} ${\n        data.name === undefined ? '' : data.name?.firstName\n      } ${data.name === undefined ? '' : data.name?.lastName}`;\n      toastId.current = toast.dark(msg);\n    });\n  }, [socket]);\n\n  useEffect(() => {\n    socket.on('BridgeEnter', (data) => {\n      setValue('phone', data.phone);\n      setValue('rut', data.rut);\n      setValue('firstName', data.name ? data.name.firstName : '');\n      setValue('lastName', data.name ? data.name.lastName : '');\n      toast.dismiss(toastId.current);\n    });\n  }, [socket, setValue]);\n\n  useEffect(() => {\n    socket.on('Hangup', () => {\n      toast.dismiss(toastId.current);\n    });\n  }, [socket]);\n\n  const Icon = () => {\n    switch (extStatus) {\n      case STATES.UNAVAILABLE:\n        return <Cross color=\"#ffffff\" />;\n      case STATES.RINGING:\n        return <Bell color=\"#000000\" />;\n      case STATES.INUSE:\n        return <HeartRate color=\"#ffffff\" />;\n      case STATES.IDLE:\n        return <Check color=\"#ffffff\" />;\n      default:\n        return <Question color=\"#ffffff\" />;\n    }\n  };\n\n  const handleOnSubmit = (formData) => {\n    fetch('/api/contacts', {\n      method: 'PUT',\n      body: JSON.stringify(formData),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n      .then((res) => res.json())\n      .catch((error) => console.error('Error:', error))\n      .then((response) => {\n        //console.log('Success:', response);\n        if (response.error) {\n          toast.error(response.error);\n        } else {\n          setValue('phone', response.phone);\n          setValue('rut', response.rut);\n          setValue('firstName', response.name.firstName);\n          setValue('lastName', response.name.lastName);\n          toast.success('Datos de contacto guardado.');\n        }\n      });\n  };\n\n  const handleReset = () => {\n    reset();\n  };\n\n  const handleBreaks = (e) => {\n    setPauseType(e.target.value);\n  };\n\n  const handleActivatePause = () => {\n    setActivateBreak(!activateBreak);\n    const data = {\n      pauseType,\n      activateBreak,\n    };\n    fetch('/api/users/break', {\n      method: 'PATCH',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n    })\n      .then((res) => res.json())\n      .catch((error) => console.error('Error:', error))\n      .then((response) => {\n        console.log('Success:', response);\n        //if (activateBreak) setPauseType('default');\n      });\n  };\n\n  return (\n    <div className=\"py-3\">\n      <div className=\"container\">\n        <div className=\"row justify-content-center justify-content-between px-3\">\n          <div className=\"form-group m-0\">\n            <Button variant={color} className=\"mb-3 mb-sm-0\" block>\n              <span>{Icon()}</span> {user.name} | {user.ext}\n            </Button>\n          </div>\n          <div className=\"form-group m-0\">\n            <div className=\"input-group\">\n              <select\n                className=\"custom-select\"\n                onChange={handleBreaks}\n                disabled={activateBreak}\n                value={pauseType}\n              >\n                <option value=\"default\">Pausas...</option>\n                <option value=\"break\">Descanso</option>\n                <option value=\"bath\">Baño</option>\n                <option value=\"lunch\">Colacion</option>\n                <option value=\"administrative\">Administrativo</option>\n                <option value=\"supervisor\">Supervisor</option>\n                <option value=\"meeting\">Reunion</option>\n                <option value=\"maintenance\">Mantencion</option>\n              </select>\n              <div className=\"input-group-append\">\n                <button\n                  className=\"btn btn-outline-secondary\"\n                  type=\"button\"\n                  onClick={handleActivatePause}\n                  disabled={pauseType === 'default' ? true : false}\n                >\n                  {activateBreak ? 'Desactivar' : 'Activar'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <hr />\n      <form onSubmit={handleSubmit(handleOnSubmit)} className=\"container\">\n        <fieldset disabled={activateBreak ? true : false}>\n          <div className=\"form-group\">\n            <label htmlFor=\"rut\">RUT</label>\n            <input\n              className=\"form-control\"\n              type=\"text\"\n              name=\"rut\"\n              ref={register({\n                required: true,\n                validate: {\n                  isRut: (value) => validate(value),\n                },\n              })}\n            />\n            <small className=\"form-text text-muted\">\n              {errors.rut?.type === 'required' && 'El campo Rut es requerido.'}\n              {errors.rut?.type === 'isRut' &&\n                'El formato del campo Rut es invalido.'}\n            </small>\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"firstName\">Nombre</label>\n            <input\n              className=\"form-control\"\n              type=\"text\"\n              name=\"firstName\"\n              ref={register({ required: true, maxLength: 15, minLength: 3 })}\n            />\n            <small className=\"form-text text-muted\">\n              {errors.firstName?.type === 'required' &&\n                'El campo Nombre  es requerido.'}\n              {errors.firstName?.type === 'maxLength' &&\n                'El maximo de catacteres para el campo Nombre es 15.'}\n              {errors.firstName?.type === 'minLength' &&\n                'El minimo de catacteres para el campo Nombre es 3.'}\n            </small>\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"lastName\">Apellido</label>\n            <input\n              className=\"form-control\"\n              type=\"text\"\n              name=\"lastName\"\n              ref={register({ required: true, maxLength: 15, minLength: 3 })}\n            />\n            <small className=\"form-text text-muted\">\n              {errors.lastName?.type === 'required' &&\n                'El campo Apellido es requerido.'}\n              {errors.lastName?.type === 'maxLength' &&\n                'El maximo de catacteres para el campo Apellido es 15.'}\n              {errors.lastName?.type === 'minLength' &&\n                'El minimo de catacteres para el campo Apellido es 3.'}\n            </small>\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"phone\">Telefono</label>\n            <input\n              className=\"form-control\"\n              type=\"text\"\n              name=\"phone\"\n              ref={register({ required: true, maxLength: 9, minLength: 9 })}\n            />\n            <small className=\"form-text text-muted\">\n              {errors.phone?.type === 'required' &&\n                'El campo Telefono  es requerido.'}\n              {errors.phone?.type === 'maxLength' &&\n                'El maximo de catacteres para el campo Telefono es 9.'}\n              {errors.phone?.type === 'minLength' &&\n                'El minimo de catacteres para el campo Telefono es 9.'}\n            </small>\n          </div>\n          <Button\n            type=\"submit\"\n            variant=\"outline-primary\"\n            className=\"mr-2\"\n            //disabled={!isDirty}\n          >\n            Guardar\n          </Button>\n          <Button\n            type=\"button\"\n            variant=\"outline-secondary\"\n            onClick={handleReset}\n          >\n            Limpiar\n          </Button>\n        </fieldset>\n      </form>\n    </div>\n  );\n};\n\nexport default Home;\n","import { Link } from 'react-router-dom';\n\nconst Page404 = () => {\n  return (\n    <>\n      <div className=\"container\">\n        <h1>Pagina no encontrada</h1>\n        <Link className=\"btn btn-info\" to=\"/\">\n          Ir Al inicio\n        </Link>\n      </div>\n    </>\n  );\n};\n\nexport default Page404;\n","import { Route, Redirect } from 'react-router-dom';\nimport useAuth from '../hooks/useAuth';\n\nconst PrivateRoute = ({ component: RouteComponent, ...rest }) => {\n  const { isLogged } = useAuth();\n  return (\n    <Route\n      {...rest}\n      render={(routeProps) =>\n        Boolean(isLogged) ? (\n          <RouteComponent {...routeProps} />\n        ) : (\n          <Redirect to={'/login'} />\n        )\n      }\n    />\n  );\n};\n\nexport default PrivateRoute;\n","import { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport { ToastContainer } from 'react-toastify';\n\n// Components\nimport Navbar from './components/Navbar';\nimport Login from './components/Login';\nimport Home from './components/Home';\nimport Page404 from './components/Page404';\n\n// Context\nimport { AuthContextProvider } from './context/AuthContext';\nimport { SocketContextProvider } from './context/SocketContext';\n\n// Private Route\nimport PrivateRoute from './routes/PrivateRoute';\n\n// Styles\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst App = () => {\n  return (\n    <AuthContextProvider>\n      <SocketContextProvider>\n        <Router>\n          <ToastContainer\n            position=\"top-right\"\n            autoClose={false}\n            newestOnTop={false}\n            closeOnClick={false}\n            rtl={false}\n            pauseOnFocusLoss={false}\n            draggable={false}\n          />\n          <Navbar />\n          <Switch>\n            <PrivateRoute exact path=\"/\" component={Home} />\n            <Route exact path=\"/login\" component={Login} />\n            <Route component={Page404} />\n          </Switch>\n        </Router>\n      </SocketContextProvider>\n    </AuthContextProvider>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}